
﻿<div id="containershow">
    <nav>
        <a class="navlink" href="/TeacherPage/List">Back To Teachers</a>
    </nav>
    <h2>New Teacher</h2>
    <form method="POST" action="/TeacherPage/Create">
        <div class="inputrow">
            <label for="TeacherId">Teacher Id:</label>
            <input type="number" id="TeacherId" name="TeacherId" />
        </div>
 
        <div class="inputrow">
            <label for="TeacherFname">First Name:</label>
            <input type="text" id="TeacherFname" name="TeacherFname" />
        </div>
        <div class="inputrow">
            <label for="TeacherLname">Last Name:</label>
            <input type="text" id="TeacherLname" name="TeacherLname" />
        </div>

        <div class="inputrow">
            <label for="TeacherEmployeeNumber">Employee Number:</label>
            <input type="text" id="EmployeeNumber" name="EmployeeNumber" />
        </div>
        <div class="inputrow">
            <label for="TeacherHireDate">Hire Date:</label>
            <input type="datetime" id="HireDate" name="Hire Date" />
        </div>
         <div class="inputrow">
            <label for="TeacherSalary">Salary:</label>
          <input type="number" id="TeacherSalary" name="TeacherSalary"/>

        </div>

        <div class="inputrow">
            <input type="submit" value="Create Teacher" />
        </div>
    </form>
</div>





		﻿<h2>Teacher Add with AJAX</h2>
<div id="containershow">
	<nav>
		<a class="navlink" href="/TeacherPage/List">Back To Teachers</a>
	</nav>
	<h2>New Teacher</h2>
	<div>
        <div class="inputrow">
            <label for="TeacherId">Teacher Id:</label>
            <input type="number" id="TeacherId" name="TeacherId" />
        </div>

        <div class="inputrow">
            <label for="TeacherFname">First Name:</label>
            <input type="text" id="TeacherFname" name="TeacherFname" />
        </div>
        <div class="inputrow">
            <label for="TeacherLname">Last Name:</label>
            <input type="text" id="TeacherLname" name="TeacherLname" />
        </div>

        <div class="inputrow">
            <label for="TeacherEmployeeNumber">Employee Number:</label>
            <input type="text" id="EmployeeNumber" name="EmployeeNumber" />
        </div>
        <div class="inputrow">
            <label for="TeacherHireDate">Hire Date:</label>
            <input type="datetime" id="HireDate" name="Hire Date" />
        </div>
        <div class="inputrow">
            <label for="TeacherSalary">Salary:</label>
            <input type="number" id="TeacherSalary" name="TeacherSalary" />

        </div>
		<div class="inputrow">
            <input type="submit" value="Create Teacher" onclick="AddTeacher()" />
		</div>
	</div>
</div>


<script>
	// goal: send a request which looks like this:
    // POST : https://localhost:xx/api/Teacher/AddTeacher
    // with POST data of TeacherID, Teachername, EmployeeNumber, HireDate, Salary.
	// note: this can be factored to a separate JS file

    function AddTeacher() {
        var URL = "/api/Teacher/AddTeacher/";

		var rq = new XMLHttpRequest();
		// where is this request sent to?
		// is the method GET or POST?
		// what should we do with the response?

    var TeacherId = document.getElementById('TeacherId').value;
        var TeacherFName = document.getElementById('TeacherFName').value;
        var TeacherLName = document.getElementById('TeacherLName').value;
        var TeacherHireDate = document.getElementById('TeacherHireDate').value;
        var TeacherSalary = document.getElementById('TeacherSalary').value;



        var TeacherData = {
            "TeacherId": TeacherId,
            "TeacherFName": TeacherFName,
            "TeacherLName": TeacherLName,
            "TeacherHireDate": TeacherHireDate,
            "TeacherSalary": TeacherSalary
		};


		rq.open("POST", URL, true);
		rq.setRequestHeader("Content-Type", "application/json");
		rq.onreadystatechange = function () {
			//ready state should be 4 AND status should be 200
			if (rq.readyState == 4 && rq.status == 200) {
				//request is successful and the request is finished

				//API returns resource of teacher
				TeacherId = rq.responseText;
                window.location = "/TeacherPage/Show/" + TeacherId;

			}

		}
		//POST information sent through the .send() method
        rq.send(JSON.stringify(TeacherData));

	}

</script>